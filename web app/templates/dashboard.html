<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - EVAL</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/modern-theme.css">
    <style>
        /* Modern Dashboard Styling */
        .dashboard-main {
            background-color: #ffffff;
            padding: 2rem;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid #e1e8e8;
        }

        .page-header h1 {
            color: var(--primary-dark);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            color: var(--gray-500);
            font-size: 0.95rem;
        }

        /* Status Cards - Compact at top */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2.5rem;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8fafa 0%, #e1e8e8 100%);
            border-radius: var(--radius-lg);
            padding: 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            border: 1px solid #c7d3d3;
            transition: all var(--transition-base);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .stat-icon {
            font-size: 2rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: var(--radius-md);
            flex-shrink: 0;
        }

        .stat-content {
            flex: 1;
        }

        .stat-content h3 {
            font-size: 0.85rem;
            color: var(--gray-600);
            margin-bottom: 0.25rem;
            font-weight: 600;
        }

        .stat-value {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 0.25rem;
        }

        .stat-badge {
            display: inline-block;
            padding: 0.15rem 0.6rem;
            border-radius: var(--radius-full);
            font-size: 0.7rem;
            font-weight: 600;
        }

        .badge-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-active {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-disabled {
            background: #f3f4f6;
            color: #6b7280;
        }

        /* Main Scoring Section - Takes up white space */
        .scoring-dashboard {
            background: white;
            border-radius: var(--radius-xl);
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 1px solid #e1e8e8;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-header h2 {
            font-size: 2rem;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .section-header p {
            color: var(--gray-500);
            font-size: 1rem;
        }

        /* Vendor Scores Grid */
        .vendor-scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .vendor-card {
            background: linear-gradient(135deg, #f8fafa 0%, #ffffff 100%);
            border: 2px solid #e1e8e8;
            border-radius: var(--radius-xl);
            padding: 2rem;
            transition: all var(--transition-base);
            position: relative;
            overflow: hidden;
        }

        .vendor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        .vendor-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .vendor-card.top-vendor::before {
            background: var(--gradient-secondary);
        }

        .vendor-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1.5rem;
        }

        .vendor-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 0.25rem;
        }

        .vendor-rank {
            background: var(--gradient-accent);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            box-shadow: var(--shadow-md);
        }

        .vendor-rank.rank-1 {
            background: var(--gradient-secondary);
        }

        .overall-score {
            text-align: center;
            padding: 1.5rem;
            background: white;
            border-radius: var(--radius-lg);
            margin-bottom: 1.5rem;
            border: 2px solid #d4f4ea;
        }

        .score-label {
            font-size: 0.85rem;
            color: var(--gray-600);
            margin-bottom: 0.5rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .score-value {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
        }

        .score-max {
            font-size: 1.2rem;
            color: var(--gray-400);
        }

        /* Score Breakdown */
        .score-breakdown {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: white;
            border-radius: var(--radius-md);
            border: 1px solid #e1e8e8;
        }

        .score-item-label {
            font-size: 0.9rem;
            color: var(--gray-700);
            font-weight: 500;
        }

        .score-item-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .compliance-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-full);
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 1rem;
        }

        .compliance-pass {
            background: #d1fae5;
            color: #065f46;
        }

        .compliance-fail {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Process Button */
        .btn-process {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 0.875rem 2rem;
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-base);
            box-shadow: var(--shadow-md);
        }

        .btn-process:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-process:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--gray-500);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            color: var(--gray-700);
            margin-bottom: 0.5rem;
        }

        /* Quick Actions - Simplified */
        .quick-actions {
            margin-top: 2rem;
        }

        .quick-actions h2 {
            font-size: 1.3rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1rem;
        }

        .action-card {
            background: white;
            border: 2px solid #e1e8e8;
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            text-decoration: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: all var(--transition-base);
        }

        .action-card:hover {
            border-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .action-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .action-card h3 {
            font-size: 1.1rem;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        .action-card p {
            font-size: 0.85rem;
            color: var(--gray-600);
        }
    </style>
</head>
<body class="dashboard-page">
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>EVAL</h2>
                <p>Proposal Analysis</p>
            </div>
            <nav class="sidebar-nav">
                <a href="/dashboard" class="nav-item active">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="/upload-rfp" class="nav-item">
                    <span class="nav-icon">üìÑ</span>
                    <span class="nav-text">Upload RFP</span>
                </a>
                <a href="/upload-vendor" class="nav-item">
                    <span class="nav-icon">üì¶</span>
                    <span class="nav-text">Upload Vendor</span>
                </a>
                <a href="/chatbot" class="nav-item" id="chatbotLink">
                    <span class="nav-icon">üí¨</span>
                    <span class="nav-text">Chatbot</span>
                    <span class="nav-badge" id="chatbotBadge" style="display: none;">Ready</span>
                </a>
                <a href="/files" class="nav-item">
                    <span class="nav-icon">üìÅ</span>
                    <span class="nav-text">Files Uploaded</span>
                </a>
                <a href="/profile" class="nav-item">
                    <span class="nav-icon">üë§</span>
                    <span class="nav-text">Profile</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button class="btn-logout" onclick="logout()">
                    <span class="nav-icon">üö™</span>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <header class="page-header">
                <div>
                    <h1>Dashboard</h1>
                    <p class="page-subtitle">Overview of your RFP analysis workflow</p>
                </div>
                <div class="header-actions">
                    <button class="btn-process" id="processButton" onclick="processDocuments()" disabled>
                        <span class="button-text">üöÄ Process Documents</span>
                        <span class="button-loader" style="display: none;">
                            <span class="spinner"></span>
                        </span>
                    </button>
                </div>
            </header>

            <!-- Status Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìÑ</div>
                    <div class="stat-content">
                        <h3>RFP Document</h3>
                        <p class="stat-value" id="rfpStatus">Not Uploaded</p>
                        <span class="stat-badge badge-pending" id="rfpBadge">Pending</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üì¶</div>
                    <div class="stat-content">
                        <h3>Vendor Responses</h3>
                        <p class="stat-value" id="vendorCount">0 Uploaded</p>
                        <span class="stat-badge badge-pending" id="vendorBadge">Pending</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚öôÔ∏è</div>
                    <div class="stat-content">
                        <h3>Processing Status</h3>
                        <p class="stat-value" id="processStatus">Not Started</p>
                        <span class="stat-badge badge-pending" id="processBadge">Waiting</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí¨</div>
                    <div class="stat-content">
                        <h3>AI Assistant</h3>
                        <p class="stat-value" id="chatbotStatus">Not Ready</p>
                        <span class="stat-badge badge-disabled" id="chatbotStatusBadge">Disabled</span>
                    </div>
                </div>
            </div>

            <!-- Vendor Scoring Dashboard (Main Content Area) -->
            <div id="scoringDashboard" class="scoring-dashboard" style="display: none;">
                <div class="section-header">
                    <h2>üèÜ Vendor Scoring Results</h2>
                    <p>Comprehensive evaluation of all vendor proposals</p>
                </div>
                <div id="vendorScoresContainer" class="vendor-scores-grid">
                    <!-- Vendor cards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Empty State (shown when no scoring results) -->
            <div id="emptyState" class="scoring-dashboard">
                <div class="empty-state">
                    <div class="empty-state-icon">üìã</div>
                    <h3>No Vendor Scores Yet</h3>
                    <p>Upload your RFP and vendor responses, then click "Process Documents" to see scoring results here.</p>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h2>Quick Actions</h2>
                <div class="actions-grid">
                    <a href="/upload-rfp" class="action-card">
                        <span class="action-icon">üìÑ</span>
                        <h3>Upload RFP</h3>
                        <p>Upload your Request for Proposal document</p>
                    </a>
                    <a href="/upload-vendor" class="action-card">
                        <span class="action-icon">üì¶</span>
                        <h3>Upload Vendors</h3>
                        <p>Add vendor response documents</p>
                    </a>
                    <a href="/files" class="action-card">
                        <span class="action-icon">üìÅ</span>
                        <h3>View Files</h3>
                        <p>Manage uploaded documents</p>
                    </a>
                    <a href="/chatbot" class="action-card" id="chatbotAction">
                        <span class="action-icon">üí¨</span>
                        <h3>Ask AI Assistant</h3>
                        <p>Query your documents with AI</p>
                    </a>
                </div>
            </div>

            <!-- Process Log -->
            <div class="process-log" id="processLog" style="display: none;">
                <h3>Processing Log</h3>
                <div class="log-container" id="logContainer"></div>
            </div>
        </main>
    </div>

    <script src="/static/js/main.js"></script>
    <script src="/static/js/vendor-scoring.js"></script>
</body>
</html>